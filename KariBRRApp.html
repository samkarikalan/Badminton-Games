<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Badminton Pair-UP</title>
<link rel="stylesheet" href="KariBRRStyle.css">
<script src="script-1.js" defer></script>
<script src="script-2.js" defer></script>
<script src="script-3.js" defer></script>
<script src="timer.js" defer></script>

</head>
<body>

<h1 class="app-logo-premium" data-i18n="appTitle">CLUB Scheduler™</h1>

<!-- ============================= -->
<!--       TOP TAB NAVIGATION      -->
<!-- ============================= -->
<div class="top-tabs">

  <!-- Left back button -->
  <button class="tab-btn back-btn active"
        onclick="showPage('homePage', this)"
        data-i18n="home">
  ホーム
</button>


  <!-- Tabs container -->
  <div class="tabs-container">
    <button class="tab-btn" onclick="showPage('page1', this)" data-i18n="players">選手一覧</button>
    <button class="tab-btn" onclick="showPage('page2', this)" data-i18n="rounds">試合ラウンド</button>
    <button class="tab-btn" onclick="showPage('page3', this)" data-i18n="summary">集計</button>
  </div>

</div>

<!-- ============================= -->
<!--           HOME PAGE           -->
<!-- ============================= -->
<div id="homePage" class="page" style="display:block;">

  <div class="compact-settings">

    <!-- Language -->
    <div class="sec">Language</div>
    <div class="row">
      <div class="btn active" onclick="setLanguage('en')" id="lang_en">English</div>
      <div class="btn" onclick="setLanguage('jp')" id="lang_jp">日本語</div>
    </div>

    <!-- Font Size -->
    <div class="sec" data-i18n="fontSize">文字サイズ</div>
    <div class="row">
      <div class="btn active" onclick="setFontSize('small')" id="font_small" data-i18n="small">Small</div>
      <div class="btn" onclick="setFontSize('medium')" id="font_medium" data-i18n="medium">Medium</div>
      <div class="btn" onclick="setFontSize('large')" id="font_large" data-i18n="large">Large</div>
    </div>

    <!-- Reset -->
    <div class="sec" data-i18n="reset">リセット</div>
    <div class="row">
      <div class="btn" onclick="ResetAll()" data-i18n="resetAll">全てをリセット</div>
      <div class="btn" onclick="resetRounds()" data-i18n="resetExcept">プレーヤー以外をリセット</div>
    </div>

  </div>
</div>

<!-- ============================= -->
<!--           PAGE 1              -->
<!--         Players Page          -->
<!-- ============================= -->
<div id="page1" class="page" style="display:none;">

  <div class="card">    
    <input type="number"
      id="num-courts"
      placeholder="コート数を入力"
      data-i18n-placeholder="enterCourts"
      min="1">
  </div>

  <div class="card">    
    <button onclick="showImportModal()" data-i18n="importPlayers">複数選手を取り込み</button>
  </div>

  <!-- Import Modal -->
  <div id="importModal">
    <div class="modal-content">

      <!-- Left Section -->
      <textarea id="players-textarea" rows="12"
        placeholder="Name,Gender&#10;Kari,Male&#10;Bhavani,Female"
        data-i18n-placeholder="importExample">
      </textarea>

      <!-- Right Section -->
      <div class="modal-right">

        <!-- Gender -->
        <div class="gender-radio" data-i18n="gender">性別</div>
        <div class="gender-radio">
          <label><input type="radio" name="genderSelect" value="Male"> <span data-i18n="male">男性</span></label>
          <label><input type="radio" name="genderSelect" value="Female"> <span data-i18n="female">女性</span></label>
        </div>

        <!-- Buttons -->
        <div class="modal-buttons">
          <button class="ok-btn" onclick="addPlayersFromText()" data-i18n="import">取り込み</button>
          <button class="cancel-btn" onclick="hideImportModal()" data-i18n="cancel">キャンセル</button>
        </div>

      </div>

    </div>
  </div>

  <div class="card">
    <input type="text"
      id="player-name"
      placeholder="選手名を入力"
      data-i18n-placeholder="enterPlayerName">

    <div class="row-addplayer">  
      <select id="player-gender">
        <option value="Male" data-i18n="male">男性</option>
        <option value="Female" data-i18n="female">女性</option>
      </select>
      <button class="add-button" onclick="addPlayer()" data-i18n="addPlayer">選手追加</button>
    </div>
  </div>

  <div class="card">
    <div id="playerList" class="player-list"></div>
  </div>

  <div class="card">
    <h3 data-i18n="fixedPairs">固定ペア設定（任意）</h3>
    <select id="fixed-pair-1"></select>
    <select id="fixed-pair-2"></select>
    <button onclick="addFixedPair()" data-i18n="add">追加</button>

    <div id="fixed-pair-list" class="fixed-pairs-list"></div>
  </div>

</div> <!-- page1 -->

<!-- ============================= -->
<!--           PAGE 2              -->
<!--           Rounds Page         -->
<!-- ============================= -->
<div id="page2" class="page" style="display:none;">

  

  <div id="game-results"></div>

<div class="round-navigation">
  <button id="prevBtn" onclick="prevRound()" disabled>« Round</button>
  <div id="roundTitle" onclick="RefreshRound()">R</div>
  <button id="nextBtn" onclick="nextRound()" disabled>Round »</button>

  <!-- Timer Icon -->
  <span class="timer-icon" onclick="toggleTimerPanel()">⏱️</span>
</div>

</div>

<!-- ============================= -->
<!--           PAGE 3              -->
<!--        Summary / Report       -->
<!-- ============================= -->
<div id="page3" class="page" style="display:none;">
  <div id="reportContainer"></div>
</div>


  <div id="timerPanel" class="timer-panel hidden" style="display:none;" >
  <div class="timer-panel-header">
    <span class="timer-title">Round Timer</span>
    <span class="timer-close" onclick="toggleTimerPanel()">✕</span>
  </div>

  <div class="timer-display" id="timerDisplay">08:00</div>

  <div class="timer-controls">


    <button onclick="unlockAudio(); startTimer()">Start</button>
    
    <button onclick="stopTimer()">Stop</button>
    <button onclick="resetTimer()">Reset</button>
  </div>

  <div class="timer-edit">
    <label>Minutes:</label>
    <input type="number" id="timerInput" value="8" min="1" max="30">
    <button onclick="applyNewTime()">Apply</button>
  </div>
</div>

<audio id="timerSound">
    <source src="timer.mp3" type="audio/mpeg">
</audio>
</body>
</html>
